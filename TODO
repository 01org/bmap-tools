1. bmaptool create is slow and can be improved if we use the FIEMAP ioctl
   better. Currently we are calling it for each block.
2. In the block device optimization code - remember the original settings and
   reconstruct them after writing.
